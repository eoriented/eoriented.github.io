<!DOCTYPE html>

<html lang="ko-KR">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="format-detection" content="telephone=no"/>

    <title>Smart Tiger&#39;s blog</title>
    
    <link rel="apple-touch-icon" sizes="180x180" href="https://eoriented.github.io/apple-touch-icon.png">
    
    
    <link rel="icon" type="image/png" sizes="16x16" href="https://eoriented.github.io/favicon.ico">
    <link rel="manifest" href="https://eoriented.github.io/manifest.json">
    <link rel="mask-icon" href="https://eoriented.github.io/safari-pinned-tab.svg" color="#FF3DB4">
    <meta name="theme-color" content="#ffffff">

    
    
    
    <link rel="stylesheet" href="https://eoriented.github.io/css/main.min.832f51bd8886edde2e4bd3034bec7fb7bb6766151b4f7c83987458ed1481c80f.css"/>

    
    
    

    
    
 
    
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-160052384-1', 'auto');
	
	ga('send', 'pageview');
}
</script>


    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
  });
  MathJax.Hub.Queue(function() {
    
    
    
    var all = MathJax.Hub.getAllJax(), i;
    for(i = 0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script> 
</head>
    <body>
        
<nav>
  <header>
    <div class="site-title">
        
        <a href="https://eoriented.github.io/">
        <img style="display: block; margin: 0px auto" width="90%" src="https://eoriented.github.io/images/logo2.png" /></a>
    </div>  
</header>
  <div class="nav-menu">
  
    <a class="color-link nav-link" href="https://eoriented.github.io/categories/bigdata/">Big data</a>
  
    <a class="color-link nav-link" href="https://eoriented.github.io/categories/machine-learning/">Machine learning</a>
  
    <a class="color-link nav-link" href="https://eoriented.github.io/categories/programming/">Programming</a>
  
    <a class="color-link nav-link" href="https://eoriented.github.io/categories/cloud/">Cloud</a>
  
    <a class="color-link nav-link" href="https://eoriented.github.io/categories/tools/">Tools</a>
  
    <a class="color-link nav-link" href="https://eoriented.github.io/categories/">Categories</a>
  
    <a class="color-link nav-link" href="https://eoriented.github.io/tags/">Tags</a>
  
  
</div>
<footer class="footer">
	<div class="social-icons" style="text-align: center">
    
    <a class="social-icon" href="https://github.com/eoriented" target="_blank" rel="noopener" title="GitHub">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">
            <path d="M13.9988029,1.32087331 C6.82105037,1.32087331 1,7.14112562 1,14.3212723 C1,20.0649109 4.72454649,24.9370678 9.89038951,26.6560892 C10.5408085,26.7757983 10.7778323,26.374374 10.7778323,26.0296121 C10.7778323,25.7215609 10.7666595,24.9035493 10.760275,23.8189856 C7.14426471,24.6042767 6.38131925,22.0760223 6.38131925,22.0760223 C5.78995672,20.5740732 4.93762853,20.1742451 4.93762853,20.1742451 C3.75729765,19.3682044 5.02701126,19.3841656 5.02701126,19.3841656 C6.33183953,19.4759425 7.01817121,20.7241085 7.01817121,20.7241085 C8.17775254,22.7104801 10.0611744,22.1366749 10.8017741,21.8038838 C10.919887,20.9643246 11.2558703,20.3913175 11.6269683,20.066507 C8.74038491,19.7385043 5.70536235,18.6228163 5.70536235,13.6413251 C5.70536235,12.2223743 6.21213051,11.0611968 7.04370914,10.1530044 C6.90963504,9.82420367 6.46351945,8.50181809 7.17139875,6.71256734 C7.17139875,6.71256734 8.26234691,6.36301702 10.7459099,8.04532771 C11.78259,7.75642995 12.8950858,7.61277914 14.000399,7.60719272 C15.1049142,7.61277914 16.2166119,7.75642995 17.2548881,8.04532771 C19.736855,6.36301702 20.8262071,6.71256734 20.8262071,6.71256734 C21.5356825,8.50181809 21.0895669,9.82420367 20.9562909,10.1530044 C21.7894656,11.0611968 22.2922435,12.2223743 22.2922435,13.6413251 C22.2922435,18.6355852 19.2524325,19.734514 16.3570705,20.0561322 C16.8231376,20.4575564 17.2389269,21.2508282 17.2389269,22.4638795 C17.2389269,24.2012564 17.2229657,25.603448 17.2229657,26.0296121 C17.2229657,26.3775663 17.4575954,26.7821827 18.116793,26.6552912 C23.2786458,24.9322794 27,20.0633148 27,14.3212723 C27,7.14112562 21.1789496,1.32087331 13.9988029,1.32087331"></path>
        </svg>
    </a>
    

    

    
    <a class="social-icon" href="mailto:eoriented@gmail.com" target="_blank" rel="noopener" title="Email">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">
            <path d="M25.2794292,5.59128519 L14,16.8707144 L2.72057081,5.59128519 C3.06733103,5.30237414 3.51336915,5.12857603 4,5.12857603 L24,5.12857603 C24.4866308,5.12857603 24.932669,5.30237414 25.2794292,5.59128519 Z M25.9956978,6.99633695 C25.998551,7.04004843 26,7.08414302 26,7.12857603 L26,20.871424 C26,21.0798433 25.9681197,21.2808166 25.9089697,21.4697335 L18.7156355,14.2763993 L25.9956978,6.99633695 Z M24.9498374,22.6319215 C24.6672737,22.7846939 24.3437653,22.871424 24,22.871424 L4,22.871424 C3.5268522,22.871424 3.09207889,22.7071233 2.74962118,22.432463 L10.0950247,15.0870594 L13.9848068,18.9768415 L14.1878486,18.7737996 L14.2030419,18.7889929 L17.6549753,15.3370594 L24.9498374,22.6319215 Z M2.00810114,21.0526627 C2.00273908,20.9929669 2,20.9325153 2,20.871424 L2,7.12857603 C2,7.08414302 2.00144896,7.04004843 2.00430222,6.99633695 L9.03436454,14.0263993 L2.00810114,21.0526627 Z"></path>
        </svg>
    </a>
    

    
    <a class="social-icon" href="https://eoriented.github.io/index.xml" target="_blank" rel="noopener" type="application/rss+xml" title="Rss">
        <svg width="28px" height="28px" viewBox="0 0 8 8" version="1.1" fill="#ABABAB" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">
            <circle xmlns="http://www.w3.org/2000/svg" class="symbol" cx="2" cy="6" r="1"/>
            <path xmlns="http://www.w3.org/2000/svg" class="symbol" d="m 1,4 a 3,3 0 0 1 3,3 h 1 a 4,4 0 0 0 -4,-4 z"/>
            <path xmlns="http://www.w3.org/2000/svg" class="symbol" d="m 1,2 a 5,5 0 0 1 5,5 h 1 a 6,6 0 0 0 -6,-6 z"/>
        </svg>
    </a>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    
    

    
</div>




	
	

	<script src="https://eoriented.github.io/js/main.min.fa5c2b23e07b5d9bfad267a52b4b24fdb053e6fb7524993383594926a3ac270c.js" integrity="sha256-+lwrI+B7XZv60melK0sk/bBT5vt1JJkzg1lJJqOsJww="></script>
</footer>
</nav>
        <div id="content" class="content-container">
        
<h1 class="post-title">Functor(펑터)와 Monad(모나드) - 1</h1>
    
    <div>
        <p>
        <p>스칼라 언어를 주로 사용하고 있는 입장에서 펑터나 모나드와 같은 용어를 종종 접하게 됩니다. 그래서 이번 포스트에서는 펑터와 모나드가 무엇인지에 대해 살펴보겠습니다.
일반적으로 대부분의 프로그래머들은, 특히 함수형 언어로 개발을 하지 않는 개발자들은, 모나드란 단어를 보았을 때, 자신과는 무관한 컴퓨터 프로그래밍 개념이고 상관없는 것이라고 생각하고 그냥 지나칠 수 있습니다. 사실 이러한 개념들은 이미 우리가 개발을 하면서 많이 접했었지만 인지를 하지 못한 것일 뿐입니다. 일단 모나드가 무엇인지 이해를 하면 다른 목적을 가진 서로 무관한 클래스나 추상화 개념들이 친숙하게 느껴질 것입니다.</p>
<h2 id="펑터functor">펑터(Functor)</h2>
<p>펑터는 어떤 값을 감싸고 있는 타입 파라미터를 가지는 자료구조입니다. 여기서 어떤 값을 감싸고 있는 타입이라는 것은 값을 감싸고 있는 컨텐스트나 컨테이너의 타입을 이야기 합니다. 해당 타입을 간단하게 그림으로 살펴보면 아래와 같습니다.</p>
<figure >
<a href="http://adit.io/posts/2013-04-17-functors,_applicatives,_and_monads_in_pictures.html" target="_blank">
  <img src="https://eoriented.github.io/images/functor-and-monad/value_and_context.png" width="100%"  style="max-width: 150px" />
  </a>

</figure>
<p>스칼라로 정의한 펑터 trait은 아래와 같습니다.</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala"><span style="color:#007020;font-weight:bold">trait</span> <span style="color:#0e84b5;font-weight:bold">Functor</span><span style="color:#666">[</span><span style="color:#902000">F</span><span style="color:#666">[</span><span style="color:#007020;font-weight:bold">_</span><span style="color:#666">]]</span> <span style="color:#666">{</span>
    <span style="color:#007020;font-weight:bold">def</span> map<span style="color:#666">[</span><span style="color:#902000">A</span>,<span style="color:#902000">B</span><span style="color:#666">](</span>fa<span style="color:#007020;font-weight:bold">:</span> <span style="color:#902000">F</span><span style="color:#666">[</span><span style="color:#902000">A</span><span style="color:#666">])(</span>f<span style="color:#007020;font-weight:bold">:</span> <span style="color:#902000">A</span> <span style="color:#666">=&gt;</span> B<span style="color:#666">)</span><span style="color:#007020;font-weight:bold">:</span> <span style="color:#902000">F</span><span style="color:#666">[</span><span style="color:#902000">B</span><span style="color:#666">]</span>
<span style="color:#666">}</span>
</code></pre></div><p>이 trait은 타입 파라미터 <code>F[_]</code>을 갖습니다. 이 <code>F[_]</code>는 위에서 이야기한 어떤 값을 감싸고 있는 컨테이너입니다. 펑터 trait에서 제공하는 유일한 연산은 <code>map</code> 함수 입니다. 이 <code>map</code>은 인자로 컨테이너와 이 컨테이너에 담긴 값을 변경하는 함수를 전달해줍니다. 그리고 그 결과를 다시 새로운 컨테이너로 포장합니다. 여기서 새로운 컨테이너라는 의미는 기존의 컨테이너의 값을 변경하는 것이 아닌 새로운 객체를 만들어 반환한다는 의미입니다.
펑터는 identity(항등) 함수를 전달하면 어떠한 다른 동작을 하지 않고 항상 같은 인스턴스를 반환해야 합니다. 즉 다음 예제와 같습니다.</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala"><span style="color:#007020;font-weight:bold">def</span> identity<span style="color:#666">[</span><span style="color:#902000">A</span><span style="color:#666">](</span>x<span style="color:#007020;font-weight:bold">:</span> <span style="color:#902000">A</span><span style="color:#666">)</span><span style="color:#007020;font-weight:bold">:</span> <span style="color:#902000">A</span> <span style="color:#666">=</span> x

map<span style="color:#666">(</span>x<span style="color:#666">)(</span>identity<span style="color:#666">)</span> <span style="color:#666">==</span> x
</code></pre></div><p>펑터의 <code>F[_]</code>의 인스턴스를 이용하는 유일한 방법은 값을 변형시키는 것이지만 기존의 <code>map</code> 함수에는 값을 꺼내는 방법이 정의되어 있지 않습니다. 예를 들어 getter나 setter와 같은 방법들이 따로 정의되어 있지 않습니다. 실제 값은 펑터라는 컨텍스트 속에 항상 존재합니다. 이것만으로는 펑터가 왜 필요한 것이고, 어디에 쓰이는지 알기 어렵습니다. 몇가지 예시를 통해 펑터에 대해 살펴보도록 하겠습니다.</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala"><span style="color:#007020;font-weight:bold">case</span> <span style="color:#007020;font-weight:bold">class</span> <span style="color:#0e84b5;font-weight:bold">Container</span><span style="color:#666">[</span><span style="color:#902000">A</span><span style="color:#666">](</span>value<span style="color:#007020;font-weight:bold">:</span> <span style="color:#902000">A</span><span style="color:#666">)</span>
<span style="color:#007020;font-weight:bold">val</span> containerFunctor <span style="color:#007020;font-weight:bold">=</span> <span style="color:#007020;font-weight:bold">new</span> <span style="color:#0e84b5;font-weight:bold">Functor</span><span style="color:#666">[</span><span style="color:#902000">Container</span><span style="color:#666">]</span> <span style="color:#666">{</span>
    <span style="color:#007020;font-weight:bold">def</span> map<span style="color:#666">[</span><span style="color:#902000">A</span>,<span style="color:#902000">B</span><span style="color:#666">](</span>ai<span style="color:#007020;font-weight:bold">:</span> <span style="color:#902000">Container</span><span style="color:#666">[</span><span style="color:#902000">A</span><span style="color:#666">])(</span>f<span style="color:#007020;font-weight:bold">:</span> <span style="color:#902000">A</span> <span style="color:#666">=&gt;</span> B<span style="color:#666">)</span><span style="color:#007020;font-weight:bold">:</span> <span style="color:#902000">Container</span><span style="color:#666">[</span><span style="color:#902000">B</span><span style="color:#666">]</span> <span style="color:#007020;font-weight:bold">=</span> <span style="color:#0e84b5;font-weight:bold">Container</span><span style="color:#666">(</span>f<span style="color:#666">(</span>ai<span style="color:#666">.</span>value<span style="color:#666">))</span>
<span style="color:#666">}</span>
</code></pre></div><p>간단한 펑터의 예입니다. 우리가 이 펑터를 통해 할 수 있는 것은 <code>map</code> 함수를 이용하여 <code>Container</code> 안에 존재하는 값을 변형하는 것입니다. 그 값을 꺼낼 수는 없습니다. 펑터를 이용하는 방법은 바로 타입 안정성을 유지하면서 값을 변형하는 것입니다.</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala"><span style="color:#007020;font-weight:bold">val</span> containerString <span style="color:#007020;font-weight:bold">=</span> <span style="color:#0e84b5;font-weight:bold">Container</span><span style="color:#666">(</span><span style="color:#4070a0">&#34;abc&#34;</span><span style="color:#666">)</span>
<span style="color:#007020;font-weight:bold">val</span> containerInt <span style="color:#007020;font-weight:bold">=</span> containerFunctor<span style="color:#666">.</span>map<span style="color:#666">(</span>containerString<span style="color:#666">)(</span><span style="color:#007020;font-weight:bold">_</span><span style="color:#666">.</span>length<span style="color:#666">)</span>
</code></pre></div><p>그러나 위와 같이 펑터를 정의하게 되면 펑터의 결과에 이어 다시 <code>map</code> 함수를 이용하고 싶은 경우에 조금 불편합니다.</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala"><span style="color:#007020;font-weight:bold">val</span> containerString <span style="color:#007020;font-weight:bold">=</span> <span style="color:#0e84b5;font-weight:bold">Container</span><span style="color:#666">(</span><span style="color:#4070a0">&#34;abc&#34;</span><span style="color:#666">)</span>
<span style="color:#007020;font-weight:bold">val</span> containerInt <span style="color:#007020;font-weight:bold">=</span> containerFunctor<span style="color:#666">.</span>map<span style="color:#666">(</span>containerFunctor<span style="color:#666">.</span>map<span style="color:#666">(</span>containerString<span style="color:#666">)(</span><span style="color:#007020;font-weight:bold">_</span><span style="color:#666">.</span>length<span style="color:#666">))(</span><span style="color:#007020;font-weight:bold">_</span> <span style="color:#666">+</span> <span style="color:#40a070">3</span><span style="color:#666">)</span>
</code></pre></div><p>위와 같이 결과에 다시 펑터의 <code>map</code> 함수를 사용하는 형태입니다. 이와 같은 경우 펑터에 여러 함수를 적용하고 싶은 경우에 보기 어려운 문제가 있습니다. 이것을 함수의 합성하듯이 사용하려면 다음과 같이 선언해주면 됩니다.</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala"><span style="color:#007020;font-weight:bold">object</span> <span style="color:#0e84b5;font-weight:bold">ToFunctorOps0</span> <span style="color:#666">{</span>
  <span style="color:#007020;font-weight:bold">class</span> <span style="color:#0e84b5;font-weight:bold">FunctorOps</span><span style="color:#666">[</span><span style="color:#902000">F</span><span style="color:#666">[</span><span style="color:#007020;font-weight:bold">_</span><span style="color:#666">]</span>, <span style="color:#902000">A</span><span style="color:#666">](</span><span style="color:#007020;font-weight:bold">val</span> self<span style="color:#007020;font-weight:bold">:</span> <span style="color:#902000">F</span><span style="color:#666">[</span><span style="color:#902000">A</span><span style="color:#666">])(</span><span style="color:#007020;font-weight:bold">implicit</span> <span style="color:#007020;font-weight:bold">val</span> F<span style="color:#007020;font-weight:bold">:</span> <span style="color:#902000">Functor</span><span style="color:#666">[</span><span style="color:#902000">F</span><span style="color:#666">])</span> <span style="color:#666">{</span>
    <span style="color:#007020;font-weight:bold">def</span> map<span style="color:#666">[</span><span style="color:#902000">B</span><span style="color:#666">](</span>f<span style="color:#007020;font-weight:bold">:</span> <span style="color:#902000">A</span> <span style="color:#666">=&gt;</span> B<span style="color:#666">)</span><span style="color:#007020;font-weight:bold">:</span> <span style="color:#902000">F</span><span style="color:#666">[</span><span style="color:#902000">B</span><span style="color:#666">]</span> <span style="color:#007020;font-weight:bold">=</span> F<span style="color:#666">.</span>map<span style="color:#666">(</span>self<span style="color:#666">)(</span>f<span style="color:#666">)</span>
  <span style="color:#666">}</span>

  <span style="color:#007020;font-weight:bold">implicit</span> <span style="color:#007020;font-weight:bold">def</span> <span style="color:#0e84b5;font-weight:bold">ToFunctorOps</span><span style="color:#666">[</span><span style="color:#902000">F</span><span style="color:#666">[</span><span style="color:#007020;font-weight:bold">_</span><span style="color:#666">]</span>,<span style="color:#902000">A</span><span style="color:#666">](</span>v<span style="color:#007020;font-weight:bold">:</span> <span style="color:#902000">F</span><span style="color:#666">[</span><span style="color:#902000">A</span><span style="color:#666">])(</span><span style="color:#007020;font-weight:bold">implicit</span> F<span style="color:#007020;font-weight:bold">:</span> <span style="color:#902000">Functor</span><span style="color:#666">[</span><span style="color:#902000">F</span><span style="color:#666">])</span><span style="color:#007020;font-weight:bold">:</span> <span style="color:#902000">FunctorOps</span><span style="color:#666">[</span><span style="color:#902000">F</span>, <span style="color:#902000">A</span><span style="color:#666">]</span> <span style="color:#007020;font-weight:bold">=</span> <span style="color:#007020;font-weight:bold">new</span> <span style="color:#0e84b5;font-weight:bold">FunctorOps</span><span style="color:#666">[</span><span style="color:#902000">F</span>, <span style="color:#902000">A</span><span style="color:#666">](</span>v<span style="color:#666">)</span>
<span style="color:#666">}</span>
</code></pre></div><p>위와 같이 스칼라의 implicit를 사용하면 내가 선언한 Container 클래스 내에 <code>map</code> 함수가 존재하는 것처럼 호출이 가능합니다. 자세한 문법적인 설명은 따로 설명하지 않겠습니다. 이제 펑터를 이용하여 함수를 합성하듯이 사용할 수 있습니다.</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala"><span style="color:#007020;font-weight:bold">val</span> containerBytes <span style="color:#007020;font-weight:bold">=</span> <span style="color:#0e84b5;font-weight:bold">Container</span><span style="color:#666">(</span>customer<span style="color:#666">)</span>
    <span style="color:#666">.</span>map<span style="color:#666">(</span><span style="color:#007020;font-weight:bold">_</span><span style="color:#666">.</span>getAddress<span style="color:#666">)</span>
    <span style="color:#666">.</span>map<span style="color:#666">(</span><span style="color:#007020;font-weight:bold">_</span><span style="color:#666">.</span>getStreet<span style="color:#666">)</span>
    <span style="color:#666">.</span>map<span style="color:#666">(</span><span style="color:#007020;font-weight:bold">_</span><span style="color:#666">.</span>substring<span style="color:#666">(</span><span style="color:#40a070">0</span><span style="color:#666">,</span> <span style="color:#40a070">3</span><span style="color:#666">))</span>
    <span style="color:#666">.</span>map<span style="color:#666">(</span><span style="color:#007020;font-weight:bold">_</span><span style="color:#666">.</span>toLowerCase<span style="color:#666">)</span>
    <span style="color:#666">.</span>map<span style="color:#666">(</span><span style="color:#007020;font-weight:bold">_</span><span style="color:#666">.</span>getBytes<span style="color:#666">)</span>
</code></pre></div><p><code>Container</code> 펑터를 이용하면 값들을 맵핑하는 것이 함수 체이닝과 다르지 않아 보입니다.</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala"><span style="color:#007020;font-weight:bold">val</span> bytes <span style="color:#007020;font-weight:bold">=</span> customer
    <span style="color:#666">.</span>getAddress<span style="color:#666">()</span>
    <span style="color:#666">.</span>getStreet<span style="color:#666">()</span>
    <span style="color:#666">.</span>substring<span style="color:#666">(</span><span style="color:#40a070">0</span><span style="color:#666">,</span> <span style="color:#40a070">3</span><span style="color:#666">)</span>
    <span style="color:#666">.</span>toLowerCase<span style="color:#666">()</span>
    <span style="color:#666">.</span>getBytes<span style="color:#666">()</span>
</code></pre></div><p>위의 예제를 보면 함수 체이닝과 크게 차이가 나지 않는데 왜 펑터라는 것이 필요로 할까요? 실제로 펑터를 이용해 추상화를 하면 여러 개념들을 모델링할 수 있습니다. 대표적인 펑터인 <code>Option</code>을 통해 살펴보겠습니다.</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala"><span style="color:#007020;font-weight:bold">implicit</span> <span style="color:#007020;font-weight:bold">val</span> functorForOption<span style="color:#007020;font-weight:bold">:</span> <span style="color:#902000">Functor</span><span style="color:#666">[</span><span style="color:#902000">Option</span><span style="color:#666">]</span> <span style="color:#007020;font-weight:bold">=</span> <span style="color:#007020;font-weight:bold">new</span> <span style="color:#0e84b5;font-weight:bold">Functor</span><span style="color:#666">[</span><span style="color:#902000">Option</span><span style="color:#666">]</span> <span style="color:#666">{</span>
  <span style="color:#007020;font-weight:bold">def</span> map<span style="color:#666">[</span><span style="color:#902000">A</span>, <span style="color:#902000">B</span><span style="color:#666">](</span>fa<span style="color:#007020;font-weight:bold">:</span> <span style="color:#902000">Option</span><span style="color:#666">[</span><span style="color:#902000">A</span><span style="color:#666">])(</span>f<span style="color:#007020;font-weight:bold">:</span> <span style="color:#902000">A</span> <span style="color:#666">=&gt;</span> B<span style="color:#666">)</span><span style="color:#007020;font-weight:bold">:</span> <span style="color:#902000">Option</span><span style="color:#666">[</span><span style="color:#902000">B</span><span style="color:#666">]</span> <span style="color:#007020;font-weight:bold">=</span> fa <span style="color:#007020;font-weight:bold">match</span> <span style="color:#666">{</span>
    <span style="color:#007020;font-weight:bold">case</span> <span style="color:#0e84b5;font-weight:bold">None</span>    <span style="color:#007020;font-weight:bold">=&gt;</span> <span style="color:#0e84b5;font-weight:bold">None</span>
    <span style="color:#007020;font-weight:bold">case</span> <span style="color:#0e84b5;font-weight:bold">Some</span><span style="color:#666">(</span>a<span style="color:#666">)</span> <span style="color:#007020;font-weight:bold">=&gt;</span> <span style="color:#0e84b5;font-weight:bold">Some</span><span style="color:#666">(</span>f<span style="color:#666">(</span>a<span style="color:#666">))</span>
  <span style="color:#666">}</span>
<span style="color:#666">}</span>
</code></pre></div><p>스칼라에서 <code>Option</code>은 타입 안정성을 보장해주면서 null 값을 표현해주는 방법입니다. Option 펑터의 경우 Option 값이 비어있는 경우 함수 f를 사용하지 않는 것이 특징입니다. 마찬가지로 <code>fa</code> 값은 변경되지 않고 그 안에 있는 값만 활용합니다.
펑터는 <code>Container</code>나 <code>Option</code>처럼 하나의 값만을 사용하는 컨테이너 뿐만 아니라 List와 같은 컬렉션도 컨테이너에 포함해서 사용할 수 있습니다. 위에서 선언한 타입 생성자인 <code>F[_]</code>가 컬렉션도 될 수 있다는 것입니다.</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala"><span style="color:#007020;font-weight:bold">implicit</span> <span style="color:#007020;font-weight:bold">val</span> listFunctor<span style="color:#007020;font-weight:bold">:</span> <span style="color:#902000">Functor</span><span style="color:#666">[</span><span style="color:#902000">List</span><span style="color:#666">]</span> <span style="color:#007020;font-weight:bold">=</span> <span style="color:#007020;font-weight:bold">new</span> <span style="color:#0e84b5;font-weight:bold">Functor</span><span style="color:#666">[</span><span style="color:#902000">List</span><span style="color:#666">]</span> <span style="color:#666">{</span>
  <span style="color:#007020;font-weight:bold">def</span> map<span style="color:#666">[</span><span style="color:#902000">A</span>, <span style="color:#902000">B</span><span style="color:#666">](</span>fa<span style="color:#007020;font-weight:bold">:</span> <span style="color:#902000">List</span><span style="color:#666">[</span><span style="color:#902000">A</span><span style="color:#666">])(</span>f<span style="color:#007020;font-weight:bold">:</span> <span style="color:#902000">A</span> <span style="color:#666">=&gt;</span> B<span style="color:#666">)</span> <span style="color:#007020;font-weight:bold">=</span> fa map f
<span style="color:#666">}</span>
</code></pre></div><p>위의 코드를 보면 이제 List안의 모든 값에 <code>f</code> 함수를 적용할 수 있습니다. 예를 들어 위의 예제에서 사용했던 Customer의 리스트인 <code>List[Customer]</code>가 있고 리스트 안에 customer들의 주소의 도로명을을 알고 싶은 경우 다음과 같이 간단히 얻을 수 있습니다. (아래의 예제는 List 펑터 자체에 대해서 map을 사용할 수 있는 implicit 처리가 되어 있다라고 가정합니다.)</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala"><span style="color:#0e84b5;font-weight:bold">List</span><span style="color:#666">(</span>cutomer1<span style="color:#666">,</span> customer2<span style="color:#666">,</span> customer3<span style="color:#666">)</span>
  <span style="color:#666">.</span>map<span style="color:#666">(</span><span style="color:#007020;font-weight:bold">_</span><span style="color:#666">.</span>getAddress<span style="color:#666">)</span>
  <span style="color:#666">.</span>map<span style="color:#666">(</span><span style="color:#007020;font-weight:bold">_</span><span style="color:#666">.</span>getStreet<span style="color:#666">)</span>
</code></pre></div><p>결과는 <code>List(street1, street2, stree3)</code>이 될 것입니다. 이 경우 위에서 처럼 함수의 체이닝을 통해서는 작업할 수 없습니다.</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala"><span style="color:#0e84b5;font-weight:bold">List</span><span style="color:#666">(</span>cutomer1<span style="color:#666">,</span> customer2<span style="color:#666">,</span> customer3<span style="color:#666">)</span>
  <span style="color:#666">.</span>getAddress<span style="color:#666">()</span>
  <span style="color:#666">.</span>getStreet<span style="color:#666">()</span>
</code></pre></div><p>바로 위에 처럼 getAddress를 컬렉션에 대해 호출할 수 없고 개별 customer에 대해 호출을 해주고 다시 컬렉션에 넣어야 합니다.
펑터는 여러 자료구조를 추상화하여 내부를 감추고 사용하기 쉬운 일관된 API를 제공합니다. 이제 펑터의 효용성에 대해 조금을 이해했을 것이라고 생각합니다.</p>
<p>다음 포스트에서는 이어서 모나드에 대해 살펴보도록 하겠습니다.</p>
<h2 id="references">References</h2>
<ul>
<li><a href="https://book.naver.com/bookdb/book_detail.nhn?bid=8829454">스칼라로 배우는 함수형 프로그래밍</a></li>
<li><a href="https://medium.com/@jooyunghan/functor-and-monad-examples-in-plain-java-9ea4d6630c6">(번역) Functor and monad examples in plain Java</a></li>
<li><a href="https://github.com/enshahar/BasicFPinScala/blob/master/Intermediate/Monad.md">스칼라 초중급자를 위한 모나드 해설</a></li>
<li><a href="https://tech.kakao.com/2016/03/03/monad-programming-with-scala-future/">Monad Programming with Scala Future</a></li>
<li><a href="http://adit.io/posts/2013-04-17-functors,_applicatives,_and_monads_in_pictures.html">Functors, Applicatives, And Monads In Pictures</a></li>
<li><a href="https://typelevel.org/cats/typeclasses/functor.html">Functor of cats</a></li>
</ul>

        </p>

        <br />
        <br />

        <div class="paging post-paging" style="margin-bottom: 15px;">
            
            
            
            <div style="text-align: right">
                <a class="right" href="https://eoriented.github.io/post/functor-and-monad-2/" rel="next" style="color: #64BEA3">
                    <span>Functor(펑터)와 Monad(모나드) - 2</span>&nbsp;&nbsp;<i class="fa fa-play" aria-hidden="true"></i>
                </a>
            </div>
            
            
        </div>
    </div>

    
    <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "smart-tiger" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    

    <div class="page-footer">
        
        <hr class="footer-divider">
        
            <a class="tag" href="https://eoriented.github.io/tags/functional-programming">#functional programming</a>
        
            <a class="tag" href="https://eoriented.github.io/tags/functor">#functor</a>
        
            <a class="tag" href="https://eoriented.github.io/tags/monad">#monad</a>
        
            <a class="tag" href="https://eoriented.github.io/tags/scala">#scala</a>
        
            <a class="tag" href="https://eoriented.github.io/tags/cats">#cats</a>
        
            <a class="tag" href="https://eoriented.github.io/tags/scalaz">#scalaz</a>
        
      
    </div>


        
        </div>
        <footer class="footer-mobile">
	<div class="social-icons" style="text-align: center">
    
    <a class="social-icon" href="https://github.com/eoriented" target="_blank" rel="noopener" title="GitHub">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">
            <path d="M13.9988029,1.32087331 C6.82105037,1.32087331 1,7.14112562 1,14.3212723 C1,20.0649109 4.72454649,24.9370678 9.89038951,26.6560892 C10.5408085,26.7757983 10.7778323,26.374374 10.7778323,26.0296121 C10.7778323,25.7215609 10.7666595,24.9035493 10.760275,23.8189856 C7.14426471,24.6042767 6.38131925,22.0760223 6.38131925,22.0760223 C5.78995672,20.5740732 4.93762853,20.1742451 4.93762853,20.1742451 C3.75729765,19.3682044 5.02701126,19.3841656 5.02701126,19.3841656 C6.33183953,19.4759425 7.01817121,20.7241085 7.01817121,20.7241085 C8.17775254,22.7104801 10.0611744,22.1366749 10.8017741,21.8038838 C10.919887,20.9643246 11.2558703,20.3913175 11.6269683,20.066507 C8.74038491,19.7385043 5.70536235,18.6228163 5.70536235,13.6413251 C5.70536235,12.2223743 6.21213051,11.0611968 7.04370914,10.1530044 C6.90963504,9.82420367 6.46351945,8.50181809 7.17139875,6.71256734 C7.17139875,6.71256734 8.26234691,6.36301702 10.7459099,8.04532771 C11.78259,7.75642995 12.8950858,7.61277914 14.000399,7.60719272 C15.1049142,7.61277914 16.2166119,7.75642995 17.2548881,8.04532771 C19.736855,6.36301702 20.8262071,6.71256734 20.8262071,6.71256734 C21.5356825,8.50181809 21.0895669,9.82420367 20.9562909,10.1530044 C21.7894656,11.0611968 22.2922435,12.2223743 22.2922435,13.6413251 C22.2922435,18.6355852 19.2524325,19.734514 16.3570705,20.0561322 C16.8231376,20.4575564 17.2389269,21.2508282 17.2389269,22.4638795 C17.2389269,24.2012564 17.2229657,25.603448 17.2229657,26.0296121 C17.2229657,26.3775663 17.4575954,26.7821827 18.116793,26.6552912 C23.2786458,24.9322794 27,20.0633148 27,14.3212723 C27,7.14112562 21.1789496,1.32087331 13.9988029,1.32087331"></path>
        </svg>
    </a>
    

    

    
    <a class="social-icon" href="mailto:eoriented@gmail.com" target="_blank" rel="noopener" title="Email">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">
            <path d="M25.2794292,5.59128519 L14,16.8707144 L2.72057081,5.59128519 C3.06733103,5.30237414 3.51336915,5.12857603 4,5.12857603 L24,5.12857603 C24.4866308,5.12857603 24.932669,5.30237414 25.2794292,5.59128519 Z M25.9956978,6.99633695 C25.998551,7.04004843 26,7.08414302 26,7.12857603 L26,20.871424 C26,21.0798433 25.9681197,21.2808166 25.9089697,21.4697335 L18.7156355,14.2763993 L25.9956978,6.99633695 Z M24.9498374,22.6319215 C24.6672737,22.7846939 24.3437653,22.871424 24,22.871424 L4,22.871424 C3.5268522,22.871424 3.09207889,22.7071233 2.74962118,22.432463 L10.0950247,15.0870594 L13.9848068,18.9768415 L14.1878486,18.7737996 L14.2030419,18.7889929 L17.6549753,15.3370594 L24.9498374,22.6319215 Z M2.00810114,21.0526627 C2.00273908,20.9929669 2,20.9325153 2,20.871424 L2,7.12857603 C2,7.08414302 2.00144896,7.04004843 2.00430222,6.99633695 L9.03436454,14.0263993 L2.00810114,21.0526627 Z"></path>
        </svg>
    </a>
    

    
    <a class="social-icon" href="https://eoriented.github.io/index.xml" target="_blank" rel="noopener" type="application/rss+xml" title="Rss">
        <svg width="28px" height="28px" viewBox="0 0 8 8" version="1.1" fill="#ABABAB" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">
            <circle xmlns="http://www.w3.org/2000/svg" class="symbol" cx="2" cy="6" r="1"/>
            <path xmlns="http://www.w3.org/2000/svg" class="symbol" d="m 1,4 a 3,3 0 0 1 3,3 h 1 a 4,4 0 0 0 -4,-4 z"/>
            <path xmlns="http://www.w3.org/2000/svg" class="symbol" d="m 1,2 a 5,5 0 0 1 5,5 h 1 a 6,6 0 0 0 -6,-6 z"/>
        </svg>
    </a>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    
    

    
</div>




	
		
		
		
	

	<script src="https://eoriented.github.io/js/main.min.fa5c2b23e07b5d9bfad267a52b4b24fdb053e6fb7524993383594926a3ac270c.js" integrity="sha256-+lwrI+B7XZv60melK0sk/bBT5vt1JJkzg1lJJqOsJww="></script>
</footer>
    </body>
</html>